// Generated by CoffeeScript 1.12.7
(function() {
  var tUpdate;

  tUpdate = (function() {
    function tUpdate() {
      $.ajaxSetup({
        cache: false
      });
      this.set_bindings();
      this.init();
    }

    tUpdate.prototype.init = function() {
      return $.getJSON('/api/t_space').always(function(data) {
        var i, len, ref, results, t_space;
        if (data.status === 'OK' && (data != null ? data.data : void 0)) {
          ref = data.data || [];
          results = [];
          for (i = 0, len = ref.length; i < len; i++) {
            t_space = ref[i];
            results.push($('#opt_t_spa').tmpl({
              id: t_space.type_spa_id,
              name: t_space.type_spa_name
            }).appendTo("#t_space_up"));
          }
          return results;
        }
      });
    };

    tUpdate.prototype.set_bindings = function() {
      return $('#update_t_space').submit(this.update_t_space);
    };

    tUpdate.prototype.update_t_space = function(e) {
      var params;
      e.preventDefault();
      params = $(e.currentTarget).serialize();
      return $.post('/api/t_space/update', params, (function(_this) {
        return function(data) {
          if (data.status === 'OK' && data.data) {
            return alert('Tipo espacio modificado con éxito');
          } else {
            return alert('Ocurrió un error, intenta más tarde');
          }
        };
      })(this));
    };

    return tUpdate;

  })();

  window.tUpdate = tUpdate;

}).call(this);
